<!doctype html>
<html lang="no">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Salut 9 Â· Kapittel 4 Â· Paysage</title>
  <link rel="stylesheet" href="assets/style.css" />
</head>

<body>
  <header class="topbar">
    <div class="brand">
      Salut 9 <small>Kapittel 4</small>
    </div>
    <div class="pills">
      <a class="btn" href="index.html">â† Til meny</a>
    </div>
  </header>

  <main class="container">
    <section class="hero">
      <div>
        <h1>ğŸï¸ Paysage: landskap + gloser</h1>
        <p>LÃ¦r sentrale landskapsord, test deg i et spill, og skriv en liten tekst om ferien din med stÃ¸tteord og setningsstartere.</p>
      </div>
      <div style="min-width:260px; width:360px; max-width:100%;">
        <div class="toast">
          <b>LÃ¦ringsmÃ¥l</b>
          <ul class="small" style="margin:8px 0 0; padding-left:18px;">
            <li>Jeg kan gjenkjenne og bruke landskapsord pÃ¥ fransk</li>
            <li>Jeg kan skrive 6â€“10 setninger om ferie og sted</li>
          </ul>
          <p class="small" style="margin:8px 0 0;">Tips: Bruk <b>Legg til i teksten</b> i setningsbyggeren.</p>
        </div>
      </div>
    </section>

    <!-- 1) GLOSER -->
    <section class="card" id="sectionVocab">
      <h2>1) Gloser</h2>
      <h3>## Ordbank: landskap</h3>

      <div style="display:flex; gap:10px; flex-wrap:wrap; margin:10px 0;">
        <button class="btn" id="toggleNo">Vis/Skjul norsk</button>
        <button class="btn" id="toggleTTS">ğŸ”Š Lesestemme: AV</button>
      </div>

      <p class="small" style="margin:0 0 10px;">
        Klikk pÃ¥ ğŸ”Š ved et ord for Ã¥ hÃ¸re uttale (hvis nettleseren stÃ¸tter det). Du kan ogsÃ¥ skjule norsk for Ã¥ Ã¸ve aktivt.
      </p>

      <div id="vocabGrid" class="grid"></div>
    </section>

    <!-- 2) SPILL -->
    <section class="card" id="sectionGame">
      <h2>2) Spill</h2>
      <h3>## Mini-quiz: Hva betyr ordet?</h3>

      <div class="toast" style="display:flex; justify-content:space-between; align-items:center; gap:12px; flex-wrap:wrap;">
        <div style="font-weight:800;">Poeng: <span id="score">0</span> / <span id="attempts">0</span></div>
        <div style="display:flex; gap:10px; flex-wrap:wrap;">
          <button class="btn btn-primary" id="newQ">Ny oppgave</button>
          <button class="btn btn-danger" id="resetGame">Nullstill</button>
        </div>
      </div>

      <div class="toast" style="margin-top:10px;">
        <div class="small" id="modeText" style="font-weight:800; margin-bottom:6px;">Modus: FR â†’ NO</div>
        <div style="display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap;">
          <div style="font-size:22px; font-weight:900;" id="question">â€”</div>
          <button class="btn" id="sayQ">ğŸ”Š</button>
        </div>

        <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:10px;">
          <input class="input" id="answer" placeholder="Skriv svaretâ€¦" style="flex:1; min-width:220px;" />
          <button class="btn btn-success" id="checkA">Sjekk</button>
        </div>

        <div class="small" style="margin-top:8px;">
          Differensiering: Spill pÃ¥ norskâ†’fransk er enklere. Du kan ogsÃ¥ dekke til norsk og prÃ¸ve Ã¥ forklare med egne ord.
        </div>
      </div>

      <div class="toast" id="gameToast" style="display:none; margin-top:10px;"></div>
    </section>

    <!-- 3) BYGG SETNING (4 stk) -->
    <section class="card" id="sectionBuilder">
      <h2>3) Bygg setning</h2>
      <h3>## Setningsbygger</h3>
      <p class="small">Velg elementer og fÃ¥ en ferdig setning du kan lime inn i teksten din.</p>

      <div class="grid">
        <div class="toast">
          <b>A) Jeg dro tilâ€¦ (passÃ© composÃ© â€“ Ãªtre)</b>
          <div id="builderA"></div>
        </div>

        <div class="toast">
          <b>B) Jeg gjordeâ€¦ (passÃ© composÃ© â€“ avoir)</b>
          <div id="builderB"></div>
        </div>

        <div class="toast">
          <b>C) Det var / det fantesâ€¦ (beskrivelse)</b>
          <div id="builderC"></div>
        </div>

        <div class="toast">
          <b>D) Det var â€¦ fordi â€¦ (mening + grunn)</b>
          <div id="builderD"></div>
        </div>
      </div>
    </section>

    <!-- 4) PRODUKSJON -->
    <section class="card" id="sectionWrite">
      <h2>4) Produksjon</h2>
      <h3>## Kreativ skriveoppgave</h3>

      <div style="display:flex; gap:10px; flex-wrap:wrap; margin:10px 0;">
        <button class="btn btn-success" id="saveText">Lagre lokalt</button>
      </div>

      <p class="small" style="margin:0 0 10px;">
        Skriv om ferien din: <b>6â€“10 setninger</b>. Bruk minst <b>5 landskapsord</b> fra ordbanken.
      </p>

      <div class="toast">
        <b>StÃ¸tte (setningsstartere):</b>
        <div class="small" id="starterList" style="margin-top:8px; line-height:1.5;"></div>
      </div>

      <div style="display:flex; gap:10px; flex-wrap:wrap; align-items:center; margin-top:10px;">
        <label class="small" style="font-weight:800;">Velg nivÃ¥ (differensiering)</label>
        <select class="input" id="level" style="min-width:280px;">
          <option value="1">NivÃ¥ 1: korte setninger + mye stÃ¸tte</option>
          <option value="2" selected>NivÃ¥ 2: normaltekst</option>
          <option value="3">NivÃ¥ 3: mer detalj + variasjon</option>
        </select>
      </div>

      <div style="margin-top:10px;">
        <b>Din tekst</b>
        <textarea class="input" id="text" rows="8" placeholder="Skriv herâ€¦"></textarea>
      </div>

      <div class="toast" style="margin-top:10px;">
        <b>Sjekk:</b> bruker jeg 5 gloser?
        <div class="small" id="glossCheck" style="margin-top:6px;"></div>
      </div>

      <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:10px;">
        <button class="btn btn-primary" id="copyText">Kopier tekst</button>
        <button class="btn" id="clearText">TÃ¸m</button>
      </div>

      <p class="small" style="margin-top:10px;">
        Obs: â€œLagre lokaltâ€ lagrer kun i din egen nettleser pÃ¥ denne enheten (ingen innlogging, ingen deling automatisk).
      </p>
    </section>

    <section class="card">
      <p class="small">Laget for GitHub Pages Â· Kan utvides med flere oppgaver senere</p>
    </section>
  </main>

<script>
(() => {
  // -------------------------
  // DATA
  // -------------------------
  const VOCAB = [
    { fr: "la montagne", no: "fjellet / fjell" },
    { fr: "la mer", no: "havet" },
    { fr: "la plage", no: "stranden" },
    { fr: "le lac", no: "innsjÃ¸en" },
    { fr: "la campagne", no: "landsbygda" },
    { fr: "la forÃªt", no: "skogen" },
    { fr: "la riviÃ¨re", no: "elven" },
    { fr: "le dÃ©sert", no: "Ã¸rkenen" },
    { fr: "les rochers", no: "steinene / klippene" },
    { fr: "une Ã®le", no: "en Ã¸y" },
    { fr: "une vallÃ©e", no: "en dal" },
    { fr: "une cascade", no: "en foss" },
    { fr: "le soleil", no: "sola" },
    { fr: "le vent", no: "vinden" }
  ];

  // -------------------------
  // UI helpers
  // -------------------------
  const $ = (id) => document.getElementById(id);

  function toast(el, msg){
    if (!el) return;
    el.style.display = "block";
    el.textContent = msg;
    clearTimeout(el._t);
    el._t = setTimeout(() => { el.style.display = "none"; }, 1600);
  }

  const norm = (s) => (s || "")
    .toLowerCase()
    .replace(/\s+/g, " ")
    .replace(/[â€™']/g, "'")
    .trim();

  // -------------------------
  // TTS
  // -------------------------
  let ttsOn = false;

  function speakFR(text){
    if (!ttsOn) return;
    if (!("speechSynthesis" in window)) return;
    const u = new SpeechSynthesisUtterance(text);
    u.lang = "fr-FR";
    u.rate = 0.95;
    window.speechSynthesis.cancel();
    window.speechSynthesis.speak(u);
  }

  $("toggleTTS").addEventListener("click", () => {
    ttsOn = !ttsOn;
    $("toggleTTS").textContent = ttsOn ? "ğŸ”Š Lesestemme: PÃ…" : "ğŸ”Š Lesestemme: AV";
  });

  // -------------------------
  // 1) VOCAB render + hide/show NO
  // -------------------------
  let showNO = true;

  function renderVocab(){
    const grid = $("vocabGrid");
    grid.innerHTML = "";
    VOCAB.forEach((w) => {
      const card = document.createElement("div");
      card.className = "toast";

      const top = document.createElement("div");
      top.style.display = "flex";
      top.style.alignItems = "center";
      top.style.justifyContent = "space-between";
      top.style.gap = "10px";

      const fr = document.createElement("div");
      fr.style.fontWeight = "900";
      fr.textContent = w.fr;

      const btn = document.createElement("button");
      btn.className = "btn";
      btn.textContent = "ğŸ”Š";
      btn.addEventListener("click", () => speakFR(w.fr));

      top.appendChild(fr);
      top.appendChild(btn);

      const no = document.createElement("div");
      no.className = "small";
      no.style.marginTop = "8px";
      no.textContent = w.no;
      no.style.opacity = showNO ? "1" : "0";
      no.style.height = showNO ? "auto" : "0";
      no.style.overflow = "hidden";

      card.appendChild(top);
      card.appendChild(no);
      grid.appendChild(card);
    });
  }

  $("toggleNo").addEventListener("click", () => {
    showNO = !showNO;
    renderVocab();
  });

  renderVocab();

  // -------------------------
  // 2) GAME
  // -------------------------
  let score = 0;
  let attempts = 0;
  let mode = "FR_NO"; // or "NO_FR"
  let current = null;

  function newQuestion(){
    current = VOCAB[Math.floor(Math.random()*VOCAB.length)];
    mode = Math.random() < 0.5 ? "FR_NO" : "NO_FR";
    $("modeText").textContent = mode === "FR_NO" ? "Modus: FR â†’ NO" : "Modus: NO â†’ FR";
    $("question").textContent = mode === "FR_NO" ? current.fr : current.no;
    $("answer").value = "";
    $("answer").focus();
  }

  function checkAnswer(){
    if (!current) return;
    const a = norm($("answer").value);
    if (!a) return;

    attempts++;
    $("attempts").textContent = attempts;

    const ok = (mode === "FR_NO")
      ? norm(current.no).includes(a) || a.includes(norm(current.no))
      : a === norm(current.fr);

    if (ok){
      score++;
      $("score").textContent = score;
      toast($("gameToast"), "âœ… Riktig!");
      speakFR(current.fr);
      setTimeout(newQuestion, 450);
    } else {
      toast($("gameToast"), "âŒ PrÃ¸v igjen!");
    }
  }

  $("newQ").addEventListener("click", newQuestion);
  $("resetGame").addEventListener("click", () => {
    score = 0; attempts = 0;
    $("score").textContent = "0";
    $("attempts").textContent = "0";
    newQuestion();
  });
  $("checkA").addEventListener("click", checkAnswer);
  $("answer").addEventListener("keydown", (e) => { if (e.key === "Enter") checkAnswer(); });
  $("sayQ").addEventListener("click", () => {
    if (!current) return;
    if (mode === "FR_NO") speakFR(current.fr);
  });

  newQuestion();

  // -------------------------
  // 3) BUILDERS (4 stk) + "Legg til i teksten"
  // -------------------------
  function appendToText(sentence){
    const ta = $("text");
    if (!ta) return;

    const s = sentence.trim();
    if (!s) return;

    const current = ta.value.trim();
    ta.value = current ? (current + "\n" + s) : s;

    // oppdater glosesjekk
    vocabCheck();

    // scroll og fokus
    ta.scrollIntoView({ behavior: "smooth", block: "center" });
    ta.focus();
  }

  function makeBuilder(mountId, config){
    const root = document.getElementById(mountId);
    if (!root) return;

    // â€œSamme malâ€-fÃ¸lelse: rader + jevn bredde + knapper under
    const rows = document.createElement("div");
    rows.style.display = "grid";
    rows.style.gap = "10px";
    rows.style.marginTop = "10px";

    const selects = config.parts.map(p => {
      const row = document.createElement("div");
      row.className = "row";
      row.style.display = "grid";
      row.style.gridTemplateColumns = "140px 1fr";
      row.style.gap = "10px";
      row.style.alignItems = "center";

      const label = document.createElement("div");
      label.className = "small";
      label.style.fontWeight = "800";
      label.textContent = p.label;

      const sel = document.createElement("select");
      sel.className = "input";

      p.options.forEach(opt => {
        const o = document.createElement("option");
        o.value = opt.value;
        o.textContent = opt.text;
        sel.appendChild(o);
      });

      row.appendChild(label);
      row.appendChild(sel);
      rows.appendChild(row);

      return sel;
    });

    const btnRow = document.createElement("div");
    btnRow.style.display = "flex";
    btnRow.style.gap = "10px";
    btnRow.style.flexWrap = "wrap";
    btnRow.style.marginTop = "10px";

    const btnMake = document.createElement("button");
    btnMake.className = "btn btn-primary";
    btnMake.textContent = "Lag setning";

    const btnCopy = document.createElement("button");
    btnCopy.className = "btn";
    btnCopy.textContent = "Kopier setning";

    const btnAdd = document.createElement("button");
    btnAdd.className = "btn btn-success";
    btnAdd.textContent = "Legg til i teksten";

    btnRow.appendChild(btnMake);
    btnRow.appendChild(btnCopy);
    btnRow.appendChild(btnAdd);

    const out = document.createElement("div");
    out.className = "toast";
    out.style.marginTop = "10px";
    out.style.display = "none";

    const outText = document.createElement("div");
    outText.style.fontWeight = "900";

    function buildSentence(){
      const values = selects.map(s => s.value);
      const sentence = config.build(values);
      outText.textContent = sentence;
      out.style.display = "block";
      speakFR(sentence);
      return sentence;
    }

    btnMake.addEventListener("click", buildSentence);

    btnCopy.addEventListener("click", async () => {
      const s = outText.textContent.trim();
      if (!s) return;
      try{
        await navigator.clipboard.writeText(s);
        toast($("gameToast"), "ğŸ“‹ Kopiert!");
      }catch(e){
        const ta = document.createElement("textarea");
        ta.value = s;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand("copy");
        ta.remove();
        toast($("gameToast"), "ğŸ“‹ Kopiert!");
      }
    });

    btnAdd.addEventListener("click", () => {
      const s = outText.textContent.trim() || buildSentence();
      appendToText(s);
      toast($("gameToast"), "â• Lagt til i teksten!");
    });

    out.appendChild(outText);
    root.appendChild(rows);
    root.appendChild(btnRow);
    root.appendChild(out);
  }

  // A) Ãªtre
  makeBuilder("builderA", {
    parts: [
      {
        label: "Sted",
        options: [
          { text: "Ã  la montagne", value: "Ã  la montagne" },
          { text: "Ã  la mer", value: "Ã  la mer" },
          { text: "Ã  la plage", value: "Ã  la plage" },
          { text: "au lac", value: "au lac" },
          { text: "Ã  la campagne", value: "Ã  la campagne" },
          { text: "en forÃªt", value: "en forÃªt" },
          { text: "dans le dÃ©sert", value: "dans le dÃ©sert" },
          { text: "prÃ¨s dâ€™une riviÃ¨re", value: "prÃ¨s dâ€™une riviÃ¨re" }
        ]
      },
      {
        label: "Med hvem",
        options: [
          { text: "avec ma famille", value: "avec ma famille" },
          { text: "avec mes amis", value: "avec mes amis" },
          { text: "avec mon frÃ¨re", value: "avec mon frÃ¨re" },
          { text: "avec ma sÅ“ur", value: "avec ma sÅ“ur" },
          { text: "seul(e)", value: "seul(e)" }
        ]
      }
    ],
    build: ([place, who]) => `Pendant les vacances, je suis allÃ©(e) ${place} ${who}.`
  });

  // B) avoir
  makeBuilder("builderB", {
    parts: [
      {
        label: "Aktivitet",
        options: [
          { text: "faire une promenade", value: "fait une promenade" },
          { text: "faire du vÃ©lo", value: "fait du vÃ©lo" },
          { text: "faire de la natation", value: "fait de la natation" },
          { text: "visiter un musÃ©e", value: "visitÃ© un musÃ©e" },
          { text: "regarder un film", value: "regardÃ© un film" },
          { text: "manger une glace", value: "mangÃ© une glace" },
          { text: "prendre des photos", value: "pris des photos" },
          { text: "jouer au foot", value: "jouÃ© au foot" }
        ]
      },
      {
        label: "Hvor",
        options: [
          { text: "Ã  la plage", value: "Ã  la plage" },
          { text: "en ville", value: "en ville" },
          { text: "Ã  la montagne", value: "Ã  la montagne" },
          { text: "au parc", value: "au parc" },
          { text: "au bord du lac", value: "au bord du lac" },
          { text: "dans la forÃªt", value: "dans la forÃªt" }
        ]
      }
    ],
    build: ([pp, where]) => `Jâ€™ai ${pp} ${where}.`
  });

  // C) Il y avait
  makeBuilder("builderC", {
    parts: [
      {
        label: "Il y avait",
        options: [
          { text: "beaucoup dâ€™arbres", value: "beaucoup dâ€™arbres" },
          { text: "des montagnes", value: "des montagnes" },
          { text: "une belle plage", value: "une belle plage" },
          { text: "un grand lac", value: "un grand lac" },
          { text: "une riviÃ¨re", value: "une riviÃ¨re" },
          { text: "des rochers", value: "des rochers" },
          { text: "du soleil", value: "du soleil" },
          { text: "du vent", value: "du vent" }
        ]
      },
      {
        label: "Sted",
        options: [
          { text: "lÃ -bas", value: "lÃ -bas" },
          { text: "dans la rÃ©gion", value: "dans la rÃ©gion" },
          { text: "prÃ¨s de lâ€™hÃ´tel", value: "prÃ¨s de lâ€™hÃ´tel" },
          { text: "autour de nous", value: "autour de nous" }
        ]
      }
    ],
    build: ([thing, place]) => `Il y avait ${thing} ${place}.`
  });

  // D) Câ€™Ã©tait â€¦ parce que â€¦
  makeBuilder("builderD", {
    parts: [
      {
        label: "Câ€™Ã©tait",
        options: [
          { text: "magnifique", value: "magnifique" },
          { text: "calme", value: "calme" },
          { text: "incroyable", value: "incroyable" },
          { text: "amusant", value: "amusant" },
          { text: "ennuyeux", value: "ennuyeux" },
          { text: "fatigant", value: "fatigant" }
        ]
      },
      {
        label: "Parce que",
        options: [
          { text: "il faisait beau", value: "parce quâ€™il faisait beau" },
          { text: "il faisait chaud", value: "parce quâ€™il faisait chaud" },
          { text: "il y avait du soleil", value: "parce quâ€™il y avait du soleil" },
          { text: "jâ€™ai vu la mer", value: "parce que jâ€™ai vu la mer" },
          { text: "jâ€™ai fait du sport", value: "parce que jâ€™ai fait du sport" },
          { text: "jâ€™Ã©tais avec mes amis", value: "parce que jâ€™Ã©tais avec mes amis" }
        ]
      }
    ],
    build: ([adj, reason]) => `Câ€™Ã©tait ${adj} ${reason}.`
  });

  // -------------------------
  // 4) Writing: starters, save/copy, vocab check
  // -------------------------
  const WRITE_KEY = "paysage_text_v1";

  const starters = {
    1: [
      "â€¢ Pendant les vacances, je suis allÃ©(e) Ã  â€¦",
      "â€¢ Jâ€™ai vu â€¦",
      "â€¢ Il y avait â€¦",
      "â€¢ Câ€™Ã©tait â€¦",
      "â€¢ Jâ€™ai fait â€¦"
    ],
    2: [
      "â€¢ Pendant les vacances, je suis allÃ©(e) Ã  â€¦ avec â€¦",
      "â€¢ Jâ€™ai visitÃ© â€¦ / Jâ€™ai vu â€¦",
      "â€¢ Il y avait â€¦ (beaucoup de â€¦)",
      "â€¢ Câ€™Ã©tait â€¦ (magnifique / calme / incroyable)",
      "â€¢ Jâ€™ai fait â€¦ (une promenade / du vÃ©lo / de la natation)"
    ],
    3: [
      "â€¢ Pendant les vacances, je suis allÃ©(e) Ã  â€¦ avec â€¦ et jâ€™ai â€¦",
      "â€¢ Jâ€™ai visitÃ© â€¦ puis jâ€™ai pris des photos.",
      "â€¢ Il y avait â€¦ autour de nous, et câ€™Ã©tait â€¦",
      "â€¢ Câ€™Ã©tait â€¦ parce que â€¦",
      "â€¢ Jâ€™ai fait â€¦ et jâ€™ai mangÃ© â€¦"
    ]
  };

  function renderStarters(){
    const lvl = $("level").value;
    $("starterList").innerHTML = starters[lvl].map(s => `<div>${s}</div>`).join("");
  }

  function vocabCheck(){
    const t = norm($("text").value);
    const used = VOCAB
      .map(v => v.fr)
      .filter(fr => t.includes(norm(fr)));

    const uniq = [...new Set(used)];
    const need = 5;

    $("glossCheck").innerHTML =
      `<div>Brukte ord: <b>${uniq.length}</b> / ${need}</div>` +
      (uniq.length
        ? `<div class="small" style="margin-top:6px;">${uniq.map(x => `â€¢ ${x}`).join("<br>")}</div>`
        : `<div class="small" style="margin-top:6px;">Tips: prÃ¸v Ã¥ bruke ord som <i>la montagne</i>, <i>la mer</i>, <i>la forÃªt</i>â€¦</div>`
      );
  }

  $("level").addEventListener("change", renderStarters);
  $("text").addEventListener("input", vocabCheck);

  $("saveText").addEventListener("click", () => {
    localStorage.setItem(WRITE_KEY, $("text").value);
    toast($("gameToast"), "âœ… Teksten er lagret lokalt!");
  });

  $("copyText").addEventListener("click", async () => {
    const text = $("text").value.trim();
    if (!text) return;
    try{
      await navigator.clipboard.writeText(text);
      toast($("gameToast"), "ğŸ“‹ Kopiert!");
    }catch(e){
      const ta = document.createElement("textarea");
      ta.value = text;
      document.body.appendChild(ta);
      ta.select();
      document.execCommand("copy");
      ta.remove();
      toast($("gameToast"), "ğŸ“‹ Kopiert!");
    }
  });

  $("clearText").addEventListener("click", () => {
    $("text").value = "";
    vocabCheck();
  });

  // init
  const saved = localStorage.getItem(WRITE_KEY);
  if (saved) $("text").value = saved;
  renderStarters();
  vocabCheck();
})();
</script>
</body>
</html>
