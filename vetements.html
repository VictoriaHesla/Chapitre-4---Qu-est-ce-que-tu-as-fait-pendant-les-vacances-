<!doctype html>
<html lang="no">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>V√™tements ‚Äì iPad & PC</title>

  <style>
    :root{
      --bg:#0b1220; --text:#eaf0ff; --muted:#b7c4ff; --accent:#7dd3fc;
      --good:#34d399; --bad:#fb7185; --warn:#fbbf24; --border:rgba(255,255,255,.12);
      --shadow:0 10px 30px rgba(0,0,0,.35); --radius:18px; --max:1080px;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; color:var(--text);
      background: radial-gradient(1200px 800px at 20% 10%, rgba(125,211,252,.18), transparent 60%),
                  radial-gradient(1000px 700px at 80% 0%, rgba(52,211,153,.12), transparent 55%),
                  var(--bg);
      line-height:1.5;
    }
    header{padding:28px 16px 14px;}
    .wrap{max-width:var(--max); margin:0 auto; padding:0 16px 40px;}
    .topbar{display:flex; gap:12px; align-items:center; justify-content:space-between; flex-wrap:wrap;}
    a{color:var(--accent); text-decoration:none} a:hover{text-decoration:underline}
    .badge{display:inline-flex; gap:8px; align-items:center; padding:6px 10px; border:1px solid var(--border);
      border-radius:999px; background:rgba(255,255,255,.06); color:var(--muted); font-size:13px; white-space:nowrap;}
    .title{font-size:clamp(22px,3.2vw,34px); margin:10px 0 6px;}
    .subtitle{color:var(--muted); margin:0 0 14px; max-width:85ch;}
    .pillrow{display:flex; gap:8px; flex-wrap:wrap}
    .pill{display:inline-flex; gap:8px; align-items:center; padding:6px 10px; border-radius:999px;
      border:1px solid var(--border); background:rgba(16,26,51,.6); font-size:13px; color:var(--muted);}
    .pill b{color:var(--text)}
    .grid{display:grid; grid-template-columns:1.1fr .9fr; gap:16px;}
    @media (max-width:980px){ .grid{grid-template-columns:1fr} }
    .card{background:linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.03));
      border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow); overflow:hidden;}
    .hd{padding:16px 16px 0; display:flex; justify-content:space-between; gap:12px; align-items:flex-start;}
    .hd h2{margin:0; font-size:18px;}
    .bd{padding:14px 16px 16px;}
    .kicker{font-size:12px; text-transform:uppercase; letter-spacing:.12em; color:var(--muted);}
    .small{font-size:13px; color:var(--muted); margin-top:8px;}
    .divider{height:1px; background:var(--border); margin:12px 0;}
    button{border:1px solid var(--border); background:rgba(255,255,255,.06); color:var(--text);
      padding:10px 12px; border-radius:12px; cursor:pointer; font-weight:700; touch-action:manipulation;}
    button:hover{background:rgba(255,255,255,.10)}
    button.primary{background:rgba(125,211,252,.18); border-color:rgba(125,211,252,.35);}
    button.good{background:rgba(52,211,153,.16); border-color:rgba(52,211,153,.35);}
    button.warn{background:rgba(251,191,36,.15); border-color:rgba(251,191,36,.35);}
    button.bad{background:rgba(251,113,133,.12); border-color:rgba(251,113,133,.35);}
    .msg{margin-top:10px; padding:10px 12px; border-radius:14px; border:1px solid var(--border); background:rgba(255,255,255,.05);}
    .msg.good{border-color:rgba(52,211,153,.45); background:rgba(52,211,153,.10)}
    .msg.bad{border-color:rgba(251,113,133,.45); background:rgba(251,113,133,.10)}
    .msg.warn{border-color:rgba(251,191,36,.45); background:rgba(251,191,36,.10)}

    .shop{display:grid; grid-template-columns:repeat(2,1fr); gap:10px;}
    @media (max-width:520px){ .shop{grid-template-columns:1fr} }
    .item{display:flex; gap:10px; align-items:center; border:1px solid var(--border); border-radius:16px;
      background:rgba(16,26,51,.45); padding:10px; user-select:none; -webkit-user-select:none; touch-action:none;}
    .thumb{width:64px; height:64px; border-radius:14px; border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.04); overflow:hidden; flex:0 0 auto;}
    .fr{font-weight:900}
    .no{color:var(--muted); font-size:13px}
    .tag{display:inline-block; margin-top:6px; font-size:12px; color:var(--muted); border:1px solid var(--border);
      background:rgba(255,255,255,.04); padding:2px 8px; border-radius:999px;}

    .stage{border:1px solid var(--border); border-radius:18px; background:rgba(16,26,51,.35); padding:12px;}
    .mannequinArea{position:relative; border-radius:18px; border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.03); overflow:hidden; min-height:420px;}
    .baseSprite{position:absolute; inset:0; display:flex; align-items:center; justify-content:center; padding:10px;}
    .baseBox{width:100%; height:420px; max-width:520px; border-radius:18px; border:1px solid rgba(255,255,255,.10); background:rgba(0,0,0,.10);}

    .slotRow{display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:12px;}
    @media (max-width:520px){ .slotRow{grid-template-columns:1fr} }
    .slot{border:1px dashed rgba(255,255,255,.22); border-radius:16px; background:rgba(0,0,0,.10); padding:10px; min-height:94px;}
    .slot strong{font-size:13px}
    .placed{margin-top:6px; display:flex; gap:10px; align-items:center; flex-wrap:wrap;}
    .placedThumb{width:54px; height:54px; border-radius:14px; border:1px solid rgba(255,255,255,.14);
      overflow:hidden; background:rgba(255,255,255,.04);}
    .chip{display:inline-flex; gap:8px; align-items:center; padding:6px 10px; border-radius:999px;
      border:1px solid rgba(255,255,255,.14); background:rgba(255,255,255,.06); font-size:13px; font-weight:800;}
    .swatch{width:14px; height:14px; border-radius:4px; border:1px solid rgba(255,255,255,.25); background:#fff;}
    .slot.hot{outline:2px solid rgba(125,211,252,.45);}
    .controlsRow{display:flex; gap:10px; flex-wrap:wrap; margin-top:10px;}

    .colors{display:grid; grid-template-columns:repeat(3,1fr); gap:10px; margin-top:10px;}
    @media (max-width:520px){ .colors{grid-template-columns:repeat(2,1fr)} }
    .cbtn{border:1px solid rgba(255,255,255,.18); background:rgba(16,26,51,.35); border-radius:14px; padding:10px; text-align:left;}
    .cbtn .box{height:28px; border-radius:10px; border:1px solid rgba(255,255,255,.18); margin-bottom:6px;}
    .cbtn b{display:block}
    .cbtn span{color:var(--muted); font-size:12px}
    .cbtn.selected{outline:2px solid rgba(52,211,153,.55);}

    select, textarea{width:100%; border:1px solid var(--border); background:rgba(16,26,51,.35); color:var(--text);
      border-radius:14px; padding:10px 12px; font:inherit; outline:none;}
    textarea{min-height:140px; resize:vertical;}
    .two{display:grid; grid-template-columns:1fr 1fr; gap:10px;}
    @media (max-width:780px){ .two{grid-template-columns:1fr} }

    .hint{padding:10px 12px; border-radius:14px; border:1px dashed rgba(255,255,255,.20); color:var(--muted); background:rgba(255,255,255,.03);}

    .dragGhost{
      position:fixed; width:84px; height:84px; border-radius:16px; border:1px solid rgba(255,255,255,.20);
      overflow:hidden; background:rgba(0,0,0,.25); pointer-events:none; z-index:9999;
      transform:translate(-9999px,-9999px);
    }
  </style>
</head>

<body>
  <header>
    <div class="wrap">
      <div class="topbar">
        <a href="index.html">‚Üê Til meny</a>
        <span class="badge">Salut 9 ¬∑ Kapittel 4 ¬∑ V√™tements</span>
      </div>

      <h1 class="title">üëï Kl√¶r og farger (PC + iPad)</h1>
      <p class="subtitle">Dra med mus eller finger. Bildene hentes fra <b>assets/img/vetements/sprite.png</b>.</p>
      <div class="pillrow">
        <span class="pill"><b>M√•l</b> 3 klesord + 2 farger i teksten</span>
        <span class="pill"><b>Tips</b> Hvis plaggene er feil besk√•ret, justerer vi ‚ÄúCROPS‚Äù.</span>
      </div>
    </div>
  </header>

  <main class="wrap">
    <div class="grid">
      <section class="card">
        <div class="hd">
          <div>
            <div class="kicker">1) Plagg</div>
            <h2>Dra riktig plagg</h2>
          </div>
          <button class="warn" id="toggleNor">Vis/skjul norsk</button>
        </div>
        <div class="bd">
          <div class="shop" id="shop"></div>
          <div id="dragFeedback" class="msg" style="display:none;"></div>

          <div class="divider"></div>

          <div class="kicker">2) Farger</div>
          <h2 style="margin:6px 0 8px;">Velg farge</h2>
          <div class="colors" id="colors"></div>
          <div class="msg" id="colorFeedback" style="display:none;"></div>

          <div class="divider"></div>

          <div class="kicker">3) Setningsbygger</div>
          <h2 style="margin:6px 0 8px;">Lag setning</h2>

          <div class="two">
            <div>
              <label class="small" for="person">Person</label>
              <select id="person"></select>
            </div>
            <div>
              <label class="small" for="pickSlot">Hvilket plagg?</label>
              <select id="pickSlot">
                <option value="top">Overdel</option>
                <option value="bottom">Underdel</option>
                <option value="feet">F√∏tter</option>
                <option value="head">Hode</option>
              </select>
            </div>
          </div>

          <div class="controlsRow">
            <button class="good" id="makeSentence">Lag setning</button>
            <button id="copySentence">Kopier setning</button>
          </div>

          <div class="msg" id="sentenceOut" style="display:none;"></div>
        </div>
      </section>

      <aside class="card">
        <div class="hd">
          <div>
            <div class="kicker">Avatar</div>
            <h2>Manneken + ruter</h2>
          </div>
          <button class="primary" id="saveOutfit">Lagre outfit</button>
        </div>

        <div class="bd">
          <div class="stage">
            <div class="mannequinArea">
              <div class="baseSprite"><div class="baseBox" id="baseBox"></div></div>
            </div>

            <div class="slotRow">
              <div class="slot" data-slot="head" id="slot_head"><strong>Hode</strong><div class="placed" id="placed_head"></div></div>
              <div class="slot" data-slot="top" id="slot_top"><strong>Overdel</strong><div class="placed" id="placed_top"></div></div>
              <div class="slot" data-slot="bottom" id="slot_bottom"><strong>Underdel</strong><div class="placed" id="placed_bottom"></div></div>
              <div class="slot" data-slot="feet" id="slot_feet"><strong>F√∏tter</strong><div class="placed" id="placed_feet"></div></div>
            </div>

            <div class="controlsRow">
              <button class="good" id="checkOutfit">Sjekk: 4 plagg</button>
              <button class="warn" id="loadOutfit">Last inn</button>
              <button class="bad" id="resetOutfit">Nullstill</button>
            </div>

            <div class="msg" id="outfitFeedback" style="display:none;"></div>
          </div>

          <div class="divider"></div>

          <div class="kicker">4) Skriveoppgave</div>
          <h2 style="margin:6px 0 8px;">Beskriv antrekket</h2>
          <div class="hint">
            ‚Ä¢ Aujourd‚Äôhui, je porte ‚Ä¶<br>
            ‚Ä¢ Il/Elle porte un/une ‚Ä¶ + couleur<br>
            ‚Ä¢ J‚Äôaime / Je n‚Äôaime pas ‚Ä¶
          </div>

          <div style="margin-top:10px;">
            <textarea id="studentText" placeholder="Skriv 6‚Äì10 setninger..."></textarea>
          </div>

          <div class="controlsRow">
            <button class="primary" id="saveText">Lagre tekst</button>
            <button id="copyText">Kopier tekst</button>
            <button id="checkTargets">Sjekk m√•l</button>
          </div>

          <div class="msg" id="textFeedback" style="display:none;"></div>
        </div>
      </aside>
    </div>
  </main>

  <div class="dragGhost" id="dragGhost"></div>

<script>
  // ‚úÖ RIKTIG FILSTI (siden du har sprite.png):
  const SPRITE_SRC = "assets/img/vetements/sprite.png";

  // Crop: x,y,w,h (0..1). Dette er ca-verdier. Vi kan finjustere etterp√•.
  const CROPS = {
    base:      { x:0.03, y:0.05, w:0.28, h:0.88 },
    tshirt:    { x:0.38, y:0.06, w:0.25, h:0.23 },
    pantalon:  { x:0.41, y:0.32, w:0.22, h:0.36 },
    casquette: { x:0.73, y:0.07, w:0.24, h:0.22 },
    chaussures:{ x:0.70, y:0.40, w:0.27, h:0.22 }
  };

  const ITEMS = [
    { id:"tshirt", fr:"un t-shirt", no:"t-skjorte", slot:"top", crop:"tshirt" },
    { id:"pantalon", fr:"un pantalon", no:"bukse", slot:"bottom", crop:"pantalon" },
    { id:"casquette", fr:"une casquette", no:"caps", slot:"head", crop:"casquette" },
    { id:"chaussures", fr:"des chaussures", no:"sko", slot:"feet", crop:"chaussures" }
  ];

  const COLORS = [
    { fr:"noir", no:"svart", hex:"#111111" },
    { fr:"blanc", no:"hvit", hex:"#f6f7fb" },
    { fr:"bleu", no:"bl√•", hex:"#2563eb" },
    { fr:"rouge", no:"r√∏d", hex:"#ef4444" },
    { fr:"vert", no:"gr√∏nn", hex:"#22c55e" },
    { fr:"jaune", no:"gul", hex:"#facc15" },
    { fr:"gris", no:"gr√•", hex:"#9ca3af" },
    { fr:"rose", no:"rosa", hex:"#fb7185" },
    { fr:"violet", no:"lilla", hex:"#8b5cf6" },
    { fr:"marron", no:"brun", hex:"#7c4a2d" },
    { fr:"orange", no:"oransje", hex:"#f97316" }
  ];

  const PERSONS = ["Je", "Il", "Elle", "Mon ami", "Mon amie"];

  const $ = (id) => document.getElementById(id);

  let showNorwegian = true;
  let selectedColor = COLORS[2]; // bleu

  const outfit = { head:null, top:null, bottom:null, feet:null };
  const outfitColor = { head:"bleu", top:"bleu", bottom:"bleu", feet:"bleu" };

  const ghost = $("dragGhost");
  let dragging = null;

  // Preload sprite to avoid ‚Äúblank‚Äù on some devices
  const spriteImg = new Image();
  spriteImg.src = SPRITE_SRC;

  function slotLabel(s){ return ({head:"hode", top:"overdel", bottom:"underdel", feet:"f√∏tter"})[s] || s; }
  function selectedColorHex(fr){ const c = COLORS.find(x=>x.fr===fr); return c?c.hex:"#7dd3fc"; }

  function spriteStyle(crop, sizePx=64){
    const c = CROPS[crop];
    const bgSizeX = (1 / c.w) * 100;
    const bgSizeY = (1 / c.h) * 100;
    const bgPosX  = -(c.x / c.w) * 100;
    const bgPosY  = -(c.y / c.h) * 100;
    return `
      width:${sizePx}px; height:${sizePx}px;
      background-image:url('${SPRITE_SRC}');
      background-repeat:no-repeat;
      background-size:${bgSizeX}% ${bgSizeY}%;
      background-position:${bgPosX}% ${bgPosY}%;
    `;
  }
  function setSpriteEl(el, crop, sizePx){ el.style.cssText += spriteStyle(crop, sizePx); }

  function renderBase(){
    const baseBox = $("baseBox");
    baseBox.textContent = "";
    baseBox.style.cssText = `${spriteStyle("base", 420)} max-width:520px; height:420px; border-radius:18px;`;
  }

  function renderShop(){
    const shop = $("shop"); shop.innerHTML = "";
    ITEMS.forEach(it => {
      const card = document.createElement("div");
      card.className = "item";

      const thumb = document.createElement("div");
      thumb.className = "thumb";
      thumb.style.cssText += spriteStyle(it.crop, 64);

      const meta = document.createElement("div");
      meta.innerHTML = `
        <div class="fr">${it.fr}</div>
        <div class="no" style="display:${showNorwegian?'block':'none'}">${it.no}</div>
        <div class="tag">plass: ${slotLabel(it.slot)}</div>
      `;

      card.appendChild(thumb);
      card.appendChild(meta);

      attachPointerDrag(card, it);
      shop.appendChild(card);
    });
  }

  function renderColors(){
    const grid = $("colors"); grid.innerHTML = "";
    COLORS.forEach(c => {
      const btn = document.createElement("button");
      btn.type="button";
      btn.className = "cbtn" + (c.fr===selectedColor.fr ? " selected" : "");
      btn.innerHTML = `<div class="box" style="background:${c.hex}"></div><b>${c.fr}</b><span>${c.no}</span>`;
      btn.onclick = () => {
        selectedColor = c;
        renderColors();
        const fb = $("colorFeedback");
        fb.style.display="block";
        fb.className="msg good";
        fb.textContent=`Farge valgt: ${c.fr} (${c.no}).`;
      };
      grid.appendChild(btn);
    });
  }

  function renderPlaced(){
    ["head","top","bottom","feet"].forEach(slot => {
      const box = $("placed_"+slot);
      box.innerHTML = "";
      const id = outfit[slot];
      if(!id){ box.innerHTML = `<span class="small">tom</span>`; return; }

      const it = ITEMS.find(x=>x.id===id);

      const t = document.createElement("div");
      t.className = "placedThumb";
      t.style.cssText += spriteStyle(it.crop, 54);

      const chip = document.createElement("span");
      chip.className = "chip";
      chip.innerHTML = `<span>${it.fr}</span><span class="swatch" style="background:${selectedColorHex(outfitColor[slot])}"></span>`;

      box.appendChild(t);
      box.appendChild(chip);
    });
  }

  // Pointer drag (works on iPad + PC)
  function attachPointerDrag(card, item){
    card.addEventListener("pointerdown", (e) => {
      e.preventDefault();
      card.setPointerCapture(e.pointerId);
      dragging = { item, pointerId: e.pointerId };

      ghost.style.cssText += spriteStyle(item.crop, 84);
      ghost.style.transform = `translate(${e.clientX - 42}px, ${e.clientY - 42}px)`;
      highlightSlotAt(e.clientX, e.clientY);
    });

    card.addEventListener("pointermove", (e) => {
      if(!dragging || dragging.pointerId !== e.pointerId) return;
      ghost.style.transform = `translate(${e.clientX - 42}px, ${e.clientY - 42}px)`;
      highlightSlotAt(e.clientX, e.clientY);
    });

    card.addEventListener("pointerup", (e) => {
      if(!dragging || dragging.pointerId !== e.pointerId) return;
      clearHighlights();
      const dropSlot = slotFromPoint(e.clientX, e.clientY);
      finishDrop(dropSlot, dragging.item);
      dragging = null;
      ghost.style.transform = "translate(-9999px,-9999px)";
      try{ card.releasePointerCapture(e.pointerId); }catch(_){}
    });

    card.addEventListener("pointercancel", () => {
      dragging = null;
      clearHighlights();
      ghost.style.transform = "translate(-9999px,-9999px)";
    });
  }

  function slotFromPoint(x,y){
    const el = document.elementFromPoint(x,y);
    const slotEl = el && el.closest ? el.closest(".slot") : null;
    return slotEl ? slotEl.dataset.slot : null;
  }
  function highlightSlotAt(x,y){
    clearHighlights();
    const s = slotFromPoint(x,y);
    if(s) $("slot_"+s).classList.add("hot");
  }
  function clearHighlights(){
    ["head","top","bottom","feet"].forEach(s => $("slot_"+s).classList.remove("hot"));
  }

  function finishDrop(slot, item){
    const fb = $("dragFeedback");
    fb.style.display = "block";

    if(!slot){
      fb.className = "msg warn";
      fb.textContent = "Slipp plagget p√• en av rutene (hode/overdel/underdel/f√∏tter).";
      return;
    }
    if(item.slot !== slot){
      fb.className = "msg bad";
      fb.textContent = `‚ùå ${item.fr} h√∏rer til p√• ${slotLabel(item.slot)}.`;
      return;
    }

    outfit[slot] = item.id;
    outfitColor[slot] = selectedColor.fr;
    renderPlaced();

    fb.className = "msg good";
    fb.textContent = `‚úÖ ${item.fr} plassert p√• ${slotLabel(slot)} (${selectedColor.fr}).`;
  }

  function initPersons(){
    const sel = $("person"); sel.innerHTML = "";
    PERSONS.forEach(p => {
      const opt = document.createElement("option");
      opt.value=p; opt.textContent=p;
      sel.appendChild(opt);
    });
  }

  function checkOutfit(){
    const filled = ["head","top","bottom","feet"].filter(s=>outfit[s]).length;
    const fb = $("outfitFeedback");
    fb.style.display="block";
    fb.className = filled===4 ? "msg good" : "msg bad";
    fb.innerHTML = filled===4 ? `üéâ Du har <b>4/4</b> plagg!` : `Du har <b>${filled}/4</b>.`;
  }

  function saveOutfit(){
    localStorage.setItem("vetements_outfit_sprite_v2", JSON.stringify({outfit, outfitColor}));
    const fb = $("outfitFeedback");
    fb.style.display="block"; fb.className="msg good"; fb.textContent="‚úÖ Outfit lagret.";
  }
  function loadOutfit(){
    const fb = $("outfitFeedback"); fb.style.display="block";
    try{
      const raw = localStorage.getItem("vetements_outfit_sprite_v2");
      if(!raw) throw new Error("none");
      const obj = JSON.parse(raw);
      Object.assign(outfit, obj.outfit||{});
      Object.assign(outfitColor, obj.outfitColor||{});
      renderPlaced();
      fb.className="msg good"; fb.textContent="‚úÖ Outfit lastet inn.";
    }catch(e){
      fb.className="msg bad"; fb.textContent="Fant ingen lagret outfit enn√•.";
    }
  }
  function resetOutfit(){
    if(!confirm("Nullstill outfit?")) return;
    outfit.head=outfit.top=outfit.bottom=outfit.feet=null;
    renderPlaced();
    $("outfitFeedback").style.display="none";
  }

  function makeSentence(){
    const who = $("person").value;
    const slot = $("pickSlot").value;
    const id = outfit[slot];
    const out = $("sentenceOut");
    out.style.display="block"; out.className="msg";

    if(!id){ out.textContent = `Tips: Dra et plagg til ${slotLabel(slot)} f√∏rst.`; return; }
    const it = ITEMS.find(x=>x.id===id);
    const col = outfitColor[slot] || selectedColor.fr;
    out.textContent = `${who} porte ${it.fr} ${col}.`;
  }

  async function copySentence(){
    const out = $("sentenceOut");
    if(out.style.display==="none") return;
    try{
      await navigator.clipboard.writeText(out.textContent);
      out.className="msg good"; out.textContent="‚úÖ Kopiert!";
      setTimeout(()=>{ out.className="msg"; }, 700);
    }catch(e){ alert("Klarte ikke √• kopiere. Marker og kopier manuelt."); }
  }

  function loadText(){
    const t = localStorage.getItem("vetements_text_sprite_v2");
    if(t) $("studentText").value = t;
  }
  function saveText(){
    localStorage.setItem("vetements_text_sprite_v2", $("studentText").value);
    const fb = $("textFeedback");
    fb.style.display="block"; fb.className="msg good"; fb.textContent="‚úÖ Tekst lagret.";
  }
  async function copyText(){
    const txt = $("studentText").value.trim();
    if(!txt){ alert("Skriv litt tekst f√∏rst üôÇ"); return; }
    try{
      await navigator.clipboard.writeText(txt);
      const fb = $("textFeedback");
      fb.style.display="block"; fb.className="msg good"; fb.textContent="‚úÖ Tekst kopiert.";
    }catch(e){ alert("Klarte ikke √• kopiere. Marker og kopier manuelt."); }
  }
  function checkTargets(){
    const txt = $("studentText").value.toLowerCase();
    const usedClothes = ITEMS.map(x=>x.fr.toLowerCase()).filter(w => txt.includes(w));
    const usedColors = COLORS.map(x=>x.fr.toLowerCase()).filter(w => txt.includes(w));
    const fb = $("textFeedback"); fb.style.display="block";
    if(usedClothes.length>=3 && usedColors.length>=2){
      fb.className="msg good"; fb.innerHTML=`‚úÖ Bra! Kl√¶r: <b>${usedClothes.length}</b>, farger: <b>${usedColors.length}</b>.`;
    }else{
      fb.className="msg bad"; fb.innerHTML=`‚ùó M√•l: 3 klesord + 2 farger. Du har: <b>${usedClothes.length}</b> og <b>${usedColors.length}</b>.`;
    }
  }

  // Wire up UI
  $("toggleNor").onclick = () => { showNorwegian = !showNorwegian; renderShop(); };
  $("checkOutfit").onclick = checkOutfit;
  $("saveOutfit").onclick = saveOutfit;
  $("loadOutfit").onclick = loadOutfit;
  $("resetOutfit").onclick = resetOutfit;
  $("makeSentence").onclick = makeSentence;
  $("copySentence").onclick = copySentence;
  $("saveText").onclick = saveText;
  $("copyText").onclick = copyText;
  $("checkTargets").onclick = checkTargets;

  // Init
  renderBase();
  renderColors();
  renderShop();
  renderPlaced();
  initPersons();
  loadText();
</script>
</body>
</html>
